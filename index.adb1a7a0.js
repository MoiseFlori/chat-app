const e=document.querySelector(".message-input"),t=document.querySelector(".chat-body"),s=document.querySelector("#send-message"),o=document.querySelector("#file-input"),i=document.querySelector("#file-upload"),n=document.querySelector(".file-upload-wrapper"),a=document.querySelector("#file-cancel"),l=document.querySelector(".chat-form"),c={message:null,file:{data:null,mime_type:null}},r=(e,...t)=>{const s=document.createElement("div");return s.classList.add("message",...t),s.innerHTML=e,s},d=s=>{s.preventDefault(),c.message=e.value.trim(),e.value="",n.classList.remove("file-uploaded"),document.body.classList.remove("show-emoji-picker");const o='<div class="message-text"></div>\n  '+(c.file.data?`<img src = "data:${c.file.mime_type};base64,${c.file.data}" class="attachment" />`:""),i=r(o,"user-message");i.querySelector(".message-text").innerText=c.message,t.appendChild(i),t.scrollTo({top:t.scrollHeight,behavior:"smooth"}),setTimeout((()=>{const e=r('<svg xmlns="http://www.w3.org/2000/svg" ...></svg>\n      <div class="message-text">\n        <div class="thinking-indicator">\n          <div class="dot"></div>\n          <div class="dot"></div>\n          <div class="dot"></div>\n        </div>\n      </div>',"bot-message",".thinking");t.appendChild(e),t.scrollTo({top:t.scrollHeight,behavior:"smooth"}),(async e=>{const s=e.querySelector(".message-text"),o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:c.message},...c.file.data?[{inline_data:c.file}]:[]]}]})};try{const i=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyDzHmtMgM4nM5MU4z1SUASXsDPs9oDPWmo",o),n=await i.json();if(!i.ok)throw new Error(n.error.message);const a=n.candidates[0].content.parts[0].text.replace(/\*\*(.*?)\*\*/g,"$1").trim();s.innerHTML=a}catch(e){console.log(e),s.innerText=e.message,s.style.color="#ff0000"}finally{c.file={},e.classList.remove("thinking"),t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}})(e)}),300)};e.addEventListener("keydown",(e=>{const t=e.target.value.trim();"Enter"===e.key&&t&&d(e)})),o.addEventListener("change",(()=>{const e=o.files[0];if(!e)return;const t=new FileReader;t.onload=t=>{n.querySelector("img").src=t.target.result,n.classList.add("file-uploaded");const s=t.target.result.split(",")[1];c.file={data:s,mime_type:e.type},o.value=""},t.readAsDataURL(e)})),a.addEventListener("click",(()=>{c.file={},n.classList.remove("file-uploaded")}));const m=new EmojiMart.Picker({theme:"light",skinTonePosition:"none",previewPosition:"none",onEmojiSelect:t=>{const{selectionStart:s,selectionEnd:o}=e;e.setRangeText(t.native,s,o,"end"),e.focus()},onClickOutside:e=>{"emoji-picker"===e.target.id?document.body.classList.toggle("show-emoji-picker"):document.body.classList.remove("show-emoji-picker")}});l.appendChild(m),s.addEventListener("click",(e=>d(e))),i.addEventListener("click",(()=>o.click()));
//# sourceMappingURL=index.adb1a7a0.js.map
