{"mappings":"AAAA,MAAMA,EAAeC,SAASC,cAAc,kBACtCC,EAAWF,SAASC,cAAc,cAClCE,EAAoBH,SAASC,cAAc,iBAC3CG,EAAYJ,SAASC,cAAc,eACnCI,EAAaL,SAASC,cAAc,gBACpCK,EAAoBN,SAASC,cAAc,wBAC3CM,EAAmBP,SAASC,cAAc,gBAC1CO,EAAWR,SAASC,cAAc,cAMlCQ,EAAW,CACfC,QAAS,KACTC,KAAM,CACJC,KAAM,KACNC,UAAW,OAKTC,EAAuB,CAACC,KAAYC,KACxC,MAAMC,EAAMjB,SAASkB,cAAc,OAGnC,OAFAD,EAAIE,UAAUC,IAAI,aAAcJ,GAChCC,EAAII,UAAYN,EACTE,CAAG,EAyCNK,EAAwBC,IAC5BA,EAAEC,iBACFf,EAASC,QAAUX,EAAa0B,MAAMC,OACtC3B,EAAa0B,MAAQ,GACrBnB,EAAkBa,UAAUQ,OAAO,iBACnC3B,SAAS4B,KAAKT,UAAUQ,OAAO,qBAE/B,MAAME,EAAiB,wCAErBpB,EAASE,KAAKC,KACV,oBAAoBH,EAASE,KAAKE,oBAAoBJ,EAASE,KAAKC,8BACpE,IAGAkB,EAAqBhB,EACzBe,EACA,gBAGFC,EAAmB7B,cAAc,iBAAiB8B,UAChDtB,EAASC,QACXR,EAAS8B,YAAYF,GACrB5B,EAAS+B,SAAS,CAAEC,IAAKhC,EAASiC,aAAcC,SAAU,WAE1DC,YAAW,KACT,MAQMC,EAAqBxB,EARJ,wQAUrB,cACA,aAGFZ,EAAS8B,YAAYM,GACrBpC,EAAS+B,SAAS,CAAEC,IAAKhC,EAASiC,aAAcC,SAAU,WA7ElCG,OAAMD,IAChC,MAAME,EAAiBF,EAAmBrC,cAAc,iBAClDwC,EAAiB,CACrBC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3Bf,KAAMgB,KAAKC,UAAU,CACnBC,SAAU,CACR,CACEC,MAAO,CACL,CAAEC,KAAMvC,EAASC,YACbD,EAASE,KAAKC,KAAO,CAAC,CAAEqC,YAAaxC,EAASE,OAAU,SAOtE,IACE,MAAMuC,QAAiBC,MAtCX,uIAsC0BV,GAChC7B,QAAasC,EAASE,OAC5B,IAAKF,EAASG,GAAI,MAAM,IAAIC,MAAM1C,EAAK2C,MAAM7C,SAC7C,MAAM8C,EAAkB5C,EAAK6C,WAAW,GAAG1C,QAAQgC,MAAM,GAAGC,KACzDU,QAAO,iBAAmB,MAC1BhC,OACHc,EAAenB,UAAYmC,C,CAC3B,MAAOD,GACPI,QAAQC,IAAIL,GACZf,EAAeT,UAAYwB,EAAM7C,QACjC8B,EAAeqB,MAAMC,MAAQ,S,CAC9B,QACCrD,EAASE,KAAO,GAChB2B,EAAmBnB,UAAUQ,OAAO,YACpCzB,EAAS+B,SAAS,CAAEC,IAAKhC,EAASiC,aAAcC,SAAU,U,GA+C1D2B,CAAoBzB,EAAmB,GACtC,IAAI,EAIPvC,EAAWiE,iBAAiB,WAAWzC,IACvC,MAAM0C,EAAc1C,EAAE2C,OAAOzC,MAAMC,OACrB,UAAVH,EAAE4C,KAAmBF,GACvB3C,EAAsBC,EAAE,IAKvBnB,EAAK4D,iBAAiB,UAAU,KACnC,MAAMrD,EAAOP,EAAUgE,MAAM,GAC7B,IAAKzD,EAAM,OACX,MAAM0D,EAAS,IAAIC,WACnBD,EAAOE,OAAShD,IACdjB,EAAkBL,cAAc,OAAOuE,IAAMjD,EAAE2C,OAAOO,OACtDnE,EAAkBa,UAAUC,IAAI,iBAChC,MAAMsD,EAAenD,EAAE2C,OAAOO,OAAOE,MAAM,KAAK,GAChDlE,EAASE,KAAO,CACdC,KAAM8D,EACN7D,UAAWF,EAAKiE,MAElBxE,EAAUqB,MAAQ,EAAE,EAEtB4C,EAAOQ,cAAclE,EAAK,IAIxBJ,EAAayD,iBAAiB,SAAS,KACzCvD,EAASE,KAAO,GAChBL,EAAkBa,UAAUQ,OAAO,gBAAgB,IAIlD,MAAGmD,EAAS,IAAIC,UAAUC,OAAO,CAClCC,MAAO,QACPC,iBAAkB,OAClBC,gBAAiB,OACjBC,cAAeC,IACb,MAAQC,eAAgBC,EAAOC,aAAcC,GAAQ1F,EACrDA,EAAa2F,aAAaL,EAAMM,OAAQJ,EAAOE,EAAK,OACpD1F,EAAa6F,OAAO,EAGtBC,eAAgBtE,IACM,iBAAhBA,EAAE2C,OAAO4B,GACX9F,SAAS4B,KAAKT,UAAU4E,OAAO,qBAE/B/F,SAAS4B,KAAKT,UAAUQ,OAAO,oBAAoB,IAMxDnB,EAAQwB,YAAY8C,GAGpB3E,EAAiB6D,iBAAiB,SAASzC,GAAKD,EAAsBC,KAGpElB,EAAQ2D,iBAAiB,SAAS,IAAM5D,EAAU4F","sources":["src/index.js"],"sourcesContent":["const messageInput = document.querySelector('.message-input');\nconst chatBody = document.querySelector('.chat-body');\nconst sendMessageButton = document.querySelector('#send-message');\nconst fileInput = document.querySelector('#file-input');\nconst fileUpload = document.querySelector('#file-upload');\nconst fileUploadWrapper = document.querySelector('.file-upload-wrapper');\nconst fileCancelButton = document.querySelector('#file-cancel');\nconst chatForm = document.querySelector('.chat-form');\n\nconst API_KEY = `AIzaSyDzHmtMgM4nM5MU4z1SUASXsDPs9oDPWmo`;\nconst API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;\n\n// Obiect care stochează datele utilizatorului (mesaj text și fișier încărcat)\nconst userData = {\n  message: null,\n  file: {\n    data: null,\n    mime_type: null,\n  },\n};\n\n// Creează un element de mesaj cu clase și conținut specific\nconst createMessageElement = (content, ...classes) => {\n  const div = document.createElement('div');\n  div.classList.add('message', ...classes);\n  div.innerHTML = content;\n  return div;\n};\n\n// Generează răspunsul bot-ului pe baza mesajului utilizatorului și a fișierului încărcat\nconst generateBotResponse = async incomingMessageDiv => {\n  const messageElement = incomingMessageDiv.querySelector('.message-text');\n  const requestOptions = {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      contents: [\n        {\n          parts: [\n            { text: userData.message },\n            ...(userData.file.data ? [{ inline_data: userData.file }] : []),\n          ],\n        },\n      ],\n    }),\n  };\n\n  try {\n    const response = await fetch(API_URL, requestOptions);\n    const data = await response.json();\n    if (!response.ok) throw new Error(data.error.message);\n    const apiResponseText = data.candidates[0].content.parts[0].text\n      .replace(/\\*\\*(.*?)\\*\\*/g, '$1')\n      .trim();\n    messageElement.innerHTML = apiResponseText;\n  } catch (error) {\n    console.log(error);\n    messageElement.innerText = error.message;\n    messageElement.style.color = '#ff0000';\n  } finally {\n    userData.file = {};\n    incomingMessageDiv.classList.remove('thinking');\n    chatBody.scrollTo({ top: chatBody.scrollHeight, behavior: 'smooth' });\n  }\n};\n\n// Gestionează trimiterea mesajelor utilizatorului\nconst handleOutgoingMessage = e => {\n  e.preventDefault();\n  userData.message = messageInput.value.trim();\n  messageInput.value = '';\n  fileUploadWrapper.classList.remove('file-uploaded');\n  document.body.classList.remove('show-emoji-picker');\n\n  const messageContent = `<div class=\"message-text\"></div>\n  ${\n    userData.file.data\n      ? `<img src = \"data:${userData.file.mime_type};base64,${userData.file.data}\" class=\"attachment\" />`\n      : ''\n  }`;\n\n  const outgoingMessageDiv = createMessageElement(\n    messageContent,\n    'user-message'\n  );\n\n  outgoingMessageDiv.querySelector('.message-text').innerText =\n    userData.message;\n  chatBody.appendChild(outgoingMessageDiv);\n  chatBody.scrollTo({ top: chatBody.scrollHeight, behavior: 'smooth' });\n\n  setTimeout(() => {\n    const messageContent = `<svg xmlns=\"http://www.w3.org/2000/svg\" ...></svg>\n      <div class=\"message-text\">\n        <div class=\"thinking-indicator\">\n          <div class=\"dot\"></div>\n          <div class=\"dot\"></div>\n          <div class=\"dot\"></div>\n        </div>\n      </div>`;\n    const incomingMessageDiv = createMessageElement(\n      messageContent,\n      'bot-message',\n      '.thinking'\n    );\n\n    chatBody.appendChild(incomingMessageDiv);\n    chatBody.scrollTo({ top: chatBody.scrollHeight, behavior: 'smooth' });\n\n    generateBotResponse(incomingMessageDiv);\n  }, 300);\n};\n\n// Adaugă eveniment de trimitere a mesajului la apăsarea tastei Enter\nmessageInput.addEventListener('keydown', e => {\n  const userMessage = e.target.value.trim();\n  if (e.key === 'Enter' && userMessage) {\n    handleOutgoingMessage(e);\n  }\n});\n\n// Gestionează încărcarea fișierelor de către utilizator\nfileInput.addEventListener('change', () => {\n  const file = fileInput.files[0];\n  if (!file) return;\n  const reader = new FileReader();\n  reader.onload = e => {\n    fileUploadWrapper.querySelector('img').src = e.target.result;\n    fileUploadWrapper.classList.add('file-uploaded');\n    const base64String = e.target.result.split(',')[1];\n    userData.file = {\n      data: base64String,\n      mime_type: file.type,\n    };\n    fileInput.value = '';\n  };\n  reader.readAsDataURL(file);\n});\n\n// Resetează datele fișierului și UI-ul la anularea fișierului\nfileCancelButton.addEventListener('click', () => {\n  userData.file = {};\n  fileUploadWrapper.classList.remove('file-uploaded');\n});\n\n// Creează un picker de emoji-uri și gestionează selectarea unui emoji\nconst picker = new EmojiMart.Picker({\n  theme: 'light',\n  skinTonePosition: 'none',\n  previewPosition: 'none',\n  onEmojiSelect: emoji => {\n    const { selectionStart: start, selectionEnd: end } = messageInput;\n    messageInput.setRangeText(emoji.native, start, end, 'end');\n    messageInput.focus();\n  },\n\n  onClickOutside: e => {\n    if (e.target.id === 'emoji-picker') {\n      document.body.classList.toggle('show-emoji-picker');\n    } else {\n      document.body.classList.remove('show-emoji-picker');\n    }\n  },\n});\n\n// Adaugă picker-ul de emoji-uri la formularul de chat\nchatForm.appendChild(picker);\n\n// Adaugă eveniment de trimitere a mesajului la click pe butonul de trimitere\nsendMessageButton.addEventListener('click', e => handleOutgoingMessage(e));\n\n// Deschide dialogul pentru încărcarea fișierelor\nfileUpload.addEventListener('click', () => fileInput.click());\n\n\n// window.addEventListener('resize', () => {\n//   if (window.innerHeight < 500) {\n//     // Când tastatura este deschisă, înălțimea scade considerabil (în funcție de dispozitiv)\n//     document\n//       .querySelector('.chat-footer')\n//       .scrollIntoView({ behavior: 'smooth' });\n//   }\n// });\n\n"],"names":["$1f0dc3b9307be026$var$messageInput","document","querySelector","$1f0dc3b9307be026$var$chatBody","$1f0dc3b9307be026$var$sendMessageButton","$1f0dc3b9307be026$var$fileInput","$1f0dc3b9307be026$var$fileUpload","$1f0dc3b9307be026$var$fileUploadWrapper","$1f0dc3b9307be026$var$fileCancelButton","$1f0dc3b9307be026$var$chatForm","$1f0dc3b9307be026$var$userData","message","file","data","mime_type","$1f0dc3b9307be026$var$createMessageElement","content","classes","div","createElement","classList","add","innerHTML","$1f0dc3b9307be026$var$handleOutgoingMessage","e","preventDefault","value","trim","remove","body","messageContent1","outgoingMessageDiv","innerText","appendChild","scrollTo","top","scrollHeight","behavior","setTimeout","incomingMessageDiv","async","messageElement","requestOptions","method","headers","JSON","stringify","contents","parts","text","inline_data","response","fetch","json","ok","Error","error","apiResponseText","candidates","replace","console","log","style","color","$1f0dc3b9307be026$var$generateBotResponse","addEventListener","userMessage","target","key","files","reader","FileReader","onload","src","result","base64String","split","type","readAsDataURL","$1f0dc3b9307be026$var$picker","EmojiMart","Picker","theme","skinTonePosition","previewPosition","onEmojiSelect","emoji","selectionStart","start","selectionEnd","end","setRangeText","native","focus","onClickOutside","id","toggle","click"],"version":3,"file":"index.adb1a7a0.js.map"}